(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/result/result"],{"634d":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var r=function(){var t=this,e=t.$createElement,n=(t._self._c,t.totalScore.toFixed(2)),r=t.maxScore.toFixed(2),o=t.topType?t.topType.score.toFixed(2):null,i=t.topType&&t.isDropdownOpen?t.getSupplementaryContent(t.topType.name):null,s=t.topType&&t.isDropdownOpen?t.getSupplementaryContent(t.topType.name):null,a=t.topType&&t.isDropdownOpen?t.getSupplementaryContent(t.topType.name):null,u=t.topType?t.topType&&t.topType.symptoms.length>0:null,c=t.__map(t.sortedResults,(function(e,n){var r=t.__get_orig(e),o=t.getColor(n),i=e.score.toFixed(2),s=t.calculatePercentage(e.score);return{$orig:r,m3:o,g4:i,m4:s}}));t.$mp.data=Object.assign({},{$root:{g0:n,g1:r,g2:o,m0:i,m1:s,m2:a,g3:u,l0:c}})},o=[]},"65bf":function(t,e,n){"use strict";n.r(e);var r=n("634d"),o=n("af87");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("98ae");var s=n("828b"),a=Object(s["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);e["default"]=a.exports},"98ae":function(t,e,n){"use strict";var r=n("cac0"),o=n.n(r);o.a},af87:function(t,e,n){"use strict";n.r(e);var r=n("f264"),o=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=o.a},b761:function(t,e,n){"use strict";(function(t,e){var r=n("47a9");n("9ecd"),n("861b");r(n("3240"));var o=r(n("65bf"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},cac0:function(t,e,n){},f264:function(t,e,n){"use strict";(function(t){var r=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("af34")),i={data:function(){return{results:[],topType:null,currentType:null,maxScore:0,totalScore:0,isDropdownOpen:!1,supplementaryData:{"心脾两虚":{medicines:"茯神、黄芪、白术、龙眼肉、酸枣仁等",music:"徵音和宫音",acupoints:"神门、心、脾"},"阴虚火旺":{medicines:"黄连、朱砂、当归、生地、阿胶等",music:"羽音与商音",acupoints:"太溪、涌泉、三阴交"},"肝郁脾虚":{medicines:"柴胡、枳实、香附、川芎、陈皮、人参等",music:"角音与宫音",acupoints:"肝，交感，皮质下"},"痰热内扰":{medicines:"半夏、竹茹、陈皮、枳实、茯苓等",music:"商音与宫音",acupoints:"神门、心、三焦、脾"},"肝郁化火":{medicines:"柴胡，龙骨，牡蛎，法半夏，桂枝，茯苓等",music:"角音",acupoints:"太冲、行间、期门"}}}},computed:{displayResults:function(){var t=this;return this.currentType?[this.results.find((function(e){return e.name===t.currentType}))]:this.results},sortedResults:function(){return(0,o.default)(this.results).sort((function(t,e){return e.score-t.score}))}},onLoad:function(t){var e=this;t.results&&(this.results=JSON.parse(decodeURIComponent(t.results))),t.topType&&(this.topType=JSON.parse(decodeURIComponent(t.topType))),this.maxScore=Math.max.apply(Math,(0,o.default)(this.results.map((function(t){return t.score})))),this.totalScore=this.results.reduce((function(t,e){return t+e.score}),0),this.$nextTick((function(){e.drawPieChart()}))},methods:{handleTypeClick:function(t){this.currentType=t.name,this.drawPieChart()},handleChartClick:function(){this.currentType=null,this.drawPieChart()},toggleDropdown:function(){this.isDropdownOpen=!this.isDropdownOpen},getSupplementaryContent:function(t){return this.supplementaryData[t]||{medicines:"暂无数据",music:"暂无数据",acupoints:"暂无数据"}},drawPieChart:function(){var e=this,n=t.createCanvasContext("pieChart",this);n.clearRect(0,0,275,200);var r=this.totalScore,o=-Math.PI/2;if(this.currentType){var i=this.results.slice(0,this.results.findIndex((function(t){return t.name===e.currentType}))),s=i.reduce((function(t,e){return t+e.score}),0);o=-Math.PI/2+2*Math.PI*s/r}var a=this.displayResults;if(a.forEach((function(t,i){var s=t.score/r,a=o+2*Math.PI*s;n.beginPath(),n.arc(137.5,100,90,o,a),n.lineTo(137.5+70*Math.cos(a),100+70*Math.sin(a)),n.arc(137.5,100,70,a,o,!0),n.lineTo(137.5+90*Math.cos(o),100+90*Math.sin(o)),n.closePath();var u=e.results.findIndex((function(e){return e.name===t.name}));n.setFillStyle(e.getColor(u)),n.fill(),o=a})),1===a.length)n.setTextAlign("center"),n.setFontSize(14),n.setFillStyle("#333333"),n.fillText(a[0].name,137.5,90),n.setFontSize(20),n.setFillStyle("#FF5B5B"),n.fillText("".concat(Math.round(a[0].score/r*100),"%"),137.5,115);else{var u=this.sortedResults[0],c=Math.round(u.score/this.totalScore*100);n.setTextAlign("center"),n.setFontSize(14),n.setFillStyle("#333333"),n.fillText(u.name,137.5,90),n.setFontSize(20),n.setFillStyle("#FF5B5B"),n.fillText("".concat(c,"%"),137.5,115)}n.draw()},getColor:function(t){var e=["#4B9EF9","#FF7B7B","#FFB66C","#64DFD6","#9F7BE9"];return e[t%e.length]},calculatePercentage:function(t){return(t/this.totalScore*100).toFixed(1)},retryTest:function(){t.reLaunch({url:"/pages/index/index"})}}};e.default=i}).call(this,n("df3c")["default"])}},[["b761","common/runtime","common/vendor"]]]);